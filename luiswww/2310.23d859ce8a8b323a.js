"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2310],{2310:(y,g,s)=>{s.r(g),s.d(g,{GenerarPageModule:()=>U});var u=s(9808),m=s(4182),r=s(7590),c=s(1741),h=s(5529),p=s(9019),i=s(2096),_=s(5753),b=s(2900),x=s(8913),M=s(4345),T=s(3646),d=s(7295);function A(a,l){if(1&a&&(i.TgZ(0,"ion-item")(1,"ion-label",26),i._uU(2),i.qZA()()),2&a){const e=i.oxw(2);i.xp6(2),i.Oqu(e.titular.empresa.razonSocial)}}function Z(a,l){1&a&&(i.TgZ(0,"ion-item")(1,"ion-label"),i._uU(2,"Empresa no encontrada"),i.qZA()())}function C(a,l){if(1&a&&(i.TgZ(0,"ion-item")(1,"ion-thumbnail",27),i._UZ(2,"ion-img",28),i.qZA(),i.TgZ(3,"ion-label"),i._uU(4,"Foto Actual"),i.qZA()()),2&a){const e=i.oxw(2);i.xp6(2),i.Q6J("src",e.webcamImage.imageAsDataUrl)}}function F(a,l){if(1&a){const e=i.EpF();i.TgZ(0,"form",14,15),i.NdJ("ngSubmit",function(){i.CHM(e);const o=i.MAs(1),n=i.oxw();return i.KtG(n.guardar(o))}),i.TgZ(2,"ion-row",16)(3,"ion-col")(4,"ion-list")(5,"ion-item")(6,"ion-label"),i._uU(7,"Nro de Afiliado"),i.qZA(),i.TgZ(8,"ion-input",17),i.NdJ("ionBlur",function(){i.CHM(e);const o=i.oxw();return i.KtG(o.buscarAfiliado())})("ngModelChange",function(o){i.CHM(e);const n=i.oxw();return i.KtG(n.titular.nroAfiliado=o)}),i.qZA()(),i.TgZ(9,"ion-item")(10,"ion-label"),i._uU(11,"Dni"),i.qZA(),i.TgZ(12,"ion-input",18),i.NdJ("ngModelChange",function(o){i.CHM(e);const n=i.oxw();return i.KtG(n.titular.dni=o)}),i.qZA()(),i.TgZ(13,"ion-item")(14,"ion-label"),i._uU(15,"Empresa"),i.qZA(),i.TgZ(16,"ion-input",19),i.NdJ("ngModelChange",function(o){i.CHM(e);const n=i.oxw();return i.KtG(n.titular.nroEmpresa=o)})("ionBlur",function(){i.CHM(e);const o=i.oxw();return i.KtG(o.buscarEmpresa())}),i.qZA()(),i.YNc(17,A,3,1,"ion-item",9),i.YNc(18,Z,3,0,"ion-item",9),i.TgZ(19,"ion-item")(20,"ion-label"),i._uU(21,"Apellido"),i.qZA(),i.TgZ(22,"ion-input",20),i.NdJ("ngModelChange",function(o){i.CHM(e);const n=i.oxw();return i.KtG(n.titular.apellido=o)}),i.qZA()(),i.TgZ(23,"ion-item")(24,"ion-label"),i._uU(25,"Nombre"),i.qZA(),i.TgZ(26,"ion-input",21),i.NdJ("ngModelChange",function(o){i.CHM(e);const n=i.oxw();return i.KtG(n.titular.nombre=o)}),i.qZA()(),i.TgZ(27,"ion-item")(28,"ion-label"),i._uU(29,"Fecha de Nacimiento"),i.qZA(),i.TgZ(30,"ion-input",22),i.NdJ("ngModelChange",function(o){i.CHM(e);const n=i.oxw();return i.KtG(n.titular.fechaNacimiento=o)}),i.qZA()(),i.TgZ(31,"ion-item")(32,"ion-label"),i._uU(33,"Tel\xe9fono"),i.qZA(),i.TgZ(34,"ion-input",23),i.NdJ("ngModelChange",function(o){i.CHM(e);const n=i.oxw();return i.KtG(n.titular.telefono=o)}),i.qZA()(),i.YNc(35,C,5,1,"ion-item",9),i.qZA()()(),i.TgZ(36,"ion-row")(37,"ion-col",24)(38,"ion-button",25),i._uU(39),i.qZA()()()()}if(2&a){const e=i.oxw();i.xp6(8),i.Q6J("ngModel",e.titular.nroAfiliado),i.xp6(4),i.Q6J("ngModel",e.titular.dni),i.xp6(4),i.Q6J("ngModel",e.titular.nroEmpresa),i.xp6(1),i.Q6J("ngIf",e.titular.empresa),i.xp6(1),i.Q6J("ngIf",null==e.titular.empresa),i.xp6(4),i.Q6J("ngModel",e.titular.apellido),i.xp6(4),i.Q6J("ngModel",e.titular.nombre),i.xp6(4),i.Q6J("ngModel",e.titular.fechaNacimiento),i.xp6(4),i.Q6J("ngModel",e.titular.telefono),i.xp6(1),i.Q6J("ngIf",e.webcamImage),i.xp6(4),i.hij(" ",e.textoTitular," ")}}function G(a,l){if(1&a&&(i.TgZ(0,"ion-item")(1,"ion-thumbnail",27),i._UZ(2,"ion-img",28),i.qZA(),i.TgZ(3,"ion-label"),i._uU(4,"Foto Actual"),i.qZA()()),2&a){const e=i.oxw(2);i.xp6(2),i.Q6J("src",e.webcamImage.imageAsDataUrl)}}function N(a,l){if(1&a){const e=i.EpF();i.TgZ(0,"form",14,29),i.NdJ("ngSubmit",function(){i.CHM(e);const o=i.MAs(1),n=i.oxw();return i.KtG(n.guardarFamiliar(o))}),i.TgZ(2,"ion-row",30)(3,"ion-col")(4,"ion-list")(5,"ion-item")(6,"ion-label"),i._uU(7,"Nro de Afiliado"),i.qZA(),i.TgZ(8,"ion-input",31),i.NdJ("ngModelChange",function(o){i.CHM(e);const n=i.oxw();return i.KtG(n.familiar.nroAfiliado=o)}),i.qZA()(),i.TgZ(9,"ion-item")(10,"ion-label"),i._uU(11,"Dni"),i.qZA(),i.TgZ(12,"ion-input",32),i.NdJ("ngModelChange",function(o){i.CHM(e);const n=i.oxw();return i.KtG(n.familiar.dni=o)}),i.qZA()(),i.TgZ(13,"ion-item")(14,"ion-label"),i._uU(15,"Apellido"),i.qZA(),i.TgZ(16,"ion-input",33),i.NdJ("ngModelChange",function(o){i.CHM(e);const n=i.oxw();return i.KtG(n.familiar.apellido=o)}),i.qZA()(),i.TgZ(17,"ion-item")(18,"ion-label"),i._uU(19,"Nombre"),i.qZA(),i.TgZ(20,"ion-input",34),i.NdJ("ngModelChange",function(o){i.CHM(e);const n=i.oxw();return i.KtG(n.familiar.nombre=o)}),i.qZA()(),i.TgZ(21,"ion-item")(22,"ion-label"),i._uU(23,"Fecha de Nacimiento"),i.qZA(),i.TgZ(24,"ion-input",35),i.NdJ("ngModelChange",function(o){i.CHM(e);const n=i.oxw();return i.KtG(n.familiar.fechaNacimiento=o)}),i.qZA()(),i.TgZ(25,"ion-item")(26,"ion-label"),i._uU(27,"Parentesco"),i.qZA(),i.TgZ(28,"ion-input",36),i.NdJ("ngModelChange",function(o){i.CHM(e);const n=i.oxw();return i.KtG(n.familiar.parentesco=o)}),i.qZA()(),i.YNc(29,G,5,1,"ion-item",9),i.qZA()()(),i.TgZ(30,"ion-row")(31,"ion-col",24)(32,"ion-button",25),i._uU(33),i.qZA()()()()}if(2&a){const e=i.oxw();i.xp6(8),i.Q6J("ngModel",e.familiar.nroAfiliado),i.xp6(4),i.Q6J("ngModel",e.familiar.dni),i.xp6(4),i.Q6J("ngModel",e.familiar.apellido),i.xp6(4),i.Q6J("ngModel",e.familiar.nombre),i.xp6(4),i.Q6J("ngModel",e.familiar.fechaNacimiento),i.xp6(4),i.Q6J("ngModel",e.familiar.parentesco),i.xp6(1),i.Q6J("ngIf",e.webcamImage),i.xp6(4),i.hij(" ",e.textoFamiliar," ")}}function P(a,l){if(1&a){const e=i.EpF();i.TgZ(0,"ion-row")(1,"ion-col")(2,"ion-button",8),i.NdJ("click",function(){i.CHM(e);const o=i.oxw();return i.KtG(o.nuevoFamiliar())}),i._uU(3,"\nNuevo Familiar\n"),i.qZA()()()}}function v(a,l){if(1&a&&(i.TgZ(0,"ion-card"),i._UZ(1,"img",28),i.TgZ(2,"ion-card-header")(3,"ion-card-subtitle"),i._uU(4),i.qZA(),i.TgZ(5,"ion-card-title"),i._uU(6),i.qZA()(),i.TgZ(7,"ion-card-content")(8,"p"),i._uU(9),i.qZA(),i.TgZ(10,"p"),i._uU(11),i.qZA(),i.TgZ(12,"p"),i._uU(13),i.qZA()()()),2&a){const e=l.$implicit;i.xp6(1),i.Q6J("src",e.fotoMostrar,i.LSH),i.xp6(3),i.AsE("",e.apellido,", ",e.nombre,""),i.xp6(2),i.hij("",e.nroAfiliado," (Titular)"),i.xp6(3),i.hij("Dni: ",e.dni,""),i.xp6(2),i.hij("Fecha de Nacimiento: ",e.fechaNacimiento,""),i.xp6(2),i.hij("Empresa: ",e.empresa.razonSocial,"")}}function w(a,l){if(1&a){const e=i.EpF();i.TgZ(0,"ion-card",37),i.NdJ("click",function(){const n=i.CHM(e).index,I=i.oxw();return i.KtG(I.familiarElegido(n))}),i._UZ(1,"img",28),i.TgZ(2,"ion-card-header")(3,"ion-card-subtitle"),i._uU(4),i.qZA(),i.TgZ(5,"ion-card-title"),i._uU(6),i.qZA()(),i.TgZ(7,"ion-card-content")(8,"p"),i._uU(9),i.qZA(),i.TgZ(10,"p"),i._uU(11),i.qZA()()()}if(2&a){const e=l.$implicit;i.xp6(1),i.Q6J("src",e.fotoMostrar,i.LSH),i.xp6(3),i.AsE("",e.apellido,", ",e.nombre,""),i.xp6(2),i.AsE("",e.nroAfiliado," (",e.parentesco,")"),i.xp6(3),i.hij("Dni: ",e.dni,""),i.xp6(2),i.hij("Fecha de Nacimiento: ",e.fechaNacimiento,"")}}const f=p.N.url,q=[{path:"",component:(()=>{class a{constructor(e,t,o,n){this.titularSrv=e,this.uiSrv=t,this.EmpresaSrv=o,this.familiarSrv=n,this.titular={nroAfiliado:0,dni:0,nroEmpresa:0,apellido:"",nombre:"",fechaNacimiento:null,foto:"",estado:!0,telefono:""},this.familiar={dni:0,apellido:"",nombre:"",fechaNacimiento:null,parentesco:"",nroAfiliado:0,foto:"",estado:!0,telefono:this.titular.telefono},this.lista=[],this.listaFamiliares=[],this.noHayTitular=!0,this.noHayFamiliar=!1,this.fondo="custom-bg",this.textoTitular="Registar Titular",this.textoFamiliar="Registrar Familiar",this.encontroAfiliado=!1,this.listaEmpresas=[],this.title="gfgangularwebcam",this.webcamImage=null,this.trigger=new h.xQ}ngOnInit(){this.EmpresaSrv.empresasAll().subscribe(e=>{this.listaEmpresas=e,console.log("listado",this.listaEmpresas)}),this.limpiarCampos()}triggerSnapshot(){this.trigger.next()}handleImage(e){console.info("Saved webcam image",e),this.webcamImage=e}get triggerObservable(){return this.trigger.asObservable()}guardar(e){!e.invalid&&this.webcamImage?(console.log("Valido ",e),"Registar Titular"==this.textoTitular?(this.titular.foto=this.webcamImage.imageAsBase64,this.titular.fotoMostrar=this.webcamImage.imageAsDataUrl,this.familiar.nroAfiliado=this.titular.nroAfiliado,this.familiar.telefono=this.titular.telefono,this.titular.estado=!0,this.titular.empresa=this.listaEmpresas.find(t=>(console.log("Buscando empresa ",this.titular.nroEmpresa),t.nroEmpresa==this.titular.nroEmpresa?t:null)),console.log("Encontrado ",this.titular.empresa),this.lista.push(this.titular),this.titularSrv.crearTitular(this.titular).subscribe(t=>{t&&this.uiSrv.presentToast("Titular Guardado")},t=>{this.uiSrv.presentToast("No se pudo agregar titular")}),this.webcamImage=null,this.noHayTitular=!1,this.noHayFamiliar=!0,this.fondo="custom-bg-familiar"):(this.titular.foto=this.webcamImage.imageAsBase64,this.titular.fotoMostrar=this.webcamImage.imageAsDataUrl,this.familiar.nroAfiliado=this.titular.nroAfiliado,this.familiar.telefono=this.titular.telefono,this.titular.estado=!0,this.titular.empresa=this.listaEmpresas.find(t=>(console.log("Buscando empresa ",this.titular.nroEmpresa),t.nroEmpresa==this.titular.nroEmpresa?t:null)),console.log("Encontrado ",this.titular.empresa),this.lista=[],this.lista.push(this.titular),this.titularSrv.actualizarTitular(this.titular).subscribe(t=>{t&&this.uiSrv.presentToast("Titular Actualizado")},t=>{this.uiSrv.presentToast("No se pudo Actualizar titular")}))):this.uiSrv.alertaInformativa("Formulario incompleto. Puede Faltar la foto")}guardarFamiliar(e){console.log("Guardando familiar"),!e.invalid&&this.webcamImage?"Registrar Familiar"==this.textoFamiliar?(this.familiar.foto=this.webcamImage.imageAsBase64,this.familiar.fotoMostrar=this.webcamImage.imageAsDataUrl,this.listaFamiliares.push(this.familiar),this.familiarSrv.crearFamiliar(this.familiar).subscribe(t=>{this.uiSrv.alertaInformativa(t?"Familiar Guardado":"No se pudo guardar familiar")}),console.log(this.familiar),this.familiar={dni:0,apellido:"",nombre:"",fechaNacimiento:null,parentesco:"",nroAfiliado:this.titular.nroAfiliado,foto:"",fotoMostrar:"",estado:!0,telefono:this.titular.telefono},this.webcamImage=null):(this.familiar.foto=this.webcamImage.imageAsBase64,this.familiar.fotoMostrar=this.webcamImage.imageAsDataUrl,this.listaFamiliares.push(this.familiar),this.familiarSrv.actualizarFamiliar(this.familiar).subscribe(t=>{this.uiSrv.alertaInformativa(t?"Familiar Actualizado":"No se pudo actualizar familiar")}),console.log(this.familiar),this.familiar={dni:0,apellido:"",nombre:"",fechaNacimiento:null,parentesco:"",nroAfiliado:this.titular.nroAfiliado,foto:"",fotoMostrar:"",estado:!0,telefono:this.titular.telefono},this.webcamImage=null):this.uiSrv.alertaInformativa("Formulario incompleto. Puede Faltar la foto")}limpiarCampos(){this.encontroAfiliado=!1,this.titular={nroAfiliado:0,dni:0,nroEmpresa:0,apellido:"",nombre:"",fechaNacimiento:null,foto:"",fotoMostrar:"",estado:!0,telefono:""},this.familiar={dni:0,apellido:"",nombre:"",fechaNacimiento:null,parentesco:"",nroAfiliado:this.titular.nroAfiliado,foto:"",fotoMostrar:"",estado:!0,telefono:this.titular.telefono},this.lista=[],this.listaFamiliares=[],this.noHayTitular=!0,this.noHayFamiliar=!1,this.fondo="custom-bg",this.textoTitular="Registar Titular",this.textoFamiliar="Registrar Familiar"}buscarAfiliado(){console.log("Nro de afiliado ",this.titular.nroAfiliado);try{this.titularSrv.buscarAfiliadoPorNro(this.titular.nroAfiliado).subscribe(e=>{console.log("Por nro",e),e.fotoMostrar=`${f}/`+e.foto,e.empresa=this.listaEmpresas.find(t=>t.nroEmpresa==e.nroEmpresa?t:null),this.titular=e,this.lista.push(this.titular),this.textoTitular="Modificar Titular",this.encontroAfiliado=!0})}catch(e){console.log("sigo")}this.familiarSrv.buscarFamiliaresPorNro(this.titular.nroAfiliado).subscribe(e=>{e.forEach(t=>{t.fotoMostrar=`${f}/`+t.foto,this.listaFamiliares.push(t)})})}nuevoFamiliar(){this.familiar.nroAfiliado=this.titular.nroAfiliado,this.familiar.telefono=this.titular.telefono,this.webcamImage=null,this.noHayTitular=!1,this.noHayFamiliar=!0,this.fondo="custom-bg-familiar"}familiarElegido(e){this.familiar=this.listaFamiliares[e],this.listaFamiliares=this.listaFamiliares.filter(t=>t.dni!=this.familiar.dni),console.log("familiar elegido "+this.familiar.nombre),console.log("indice ",e),this.textoFamiliar="Modificar Titular",this.webcamImage=null,this.noHayTitular=!1,this.noHayFamiliar=!0,this.fondo="custom-bg-familiar"}buscarEmpresa(){console.log("Buscando empresa ",this.titular.nroEmpresa);const e=this.listaEmpresas.find(t=>{if(t.nroEmpresa==this.titular.nroEmpresa)return t});console.log("Buscando empresa ",this.titular.empresa),e&&(this.titular.empresa=e)}}return a.\u0275fac=function(e){return new(e||a)(i.Y36(_.n),i.Y36(b.B),i.Y36(x.P),i.Y36(M.E))},a.\u0275cmp=i.Xpm({type:a,selectors:[["app-generar"]],decls:23,vars:10,consts:[["nombre","Generar Carnets"],[1,"ion-padding"],["fixed",""],["size","4"],[3,"height","width","trigger","imageCapture"],[1,"actionBtn",3,"click"],["size","8"],[3,"ngSubmit",4,"ngIf"],["expand","block","color","tertiary","shape","round",3,"click"],[4,"ngIf"],[1,"custom-bg-cards"],["size-xs","12","size-md","6"],[4,"ngFor","ngForOf"],["button","true",3,"click",4,"ngFor","ngForOf"],[3,"ngSubmit"],["formulario","ngForm"],[1,"custom-bg"],["name","nroAfiliado","required","","type","number",3,"ngModel","ionBlur","ngModelChange"],["name","dni","required","","type","number",3,"ngModel","ngModelChange"],["name","empresa","required","","type","number",3,"ngModel","ngModelChange","ionBlur"],["name","apellido","type","text","required","",3,"ngModel","ngModelChange"],["name","nombre","type","text","required","",3,"ngModel","ngModelChange"],["name","fechaNacimiento","type","date","required","",3,"ngModel","ngModelChange"],["name","telefono","type","text","required","",3,"ngModel","ngModelChange"],[1,"ion-text-center"],["type","submit","color","tertiary","shape","round"],[1,"my-label"],["slot","start"],[3,"src"],["familiarForm","ngForm"],[1,"custom-bg-familiar"],["name","nroAfiliadoFamiliar","required","","type","number",3,"ngModel","ngModelChange"],["name","dniFamiliar","required","","type","number",3,"ngModel","ngModelChange"],["name","apellidoFamiliar","type","text","required","",3,"ngModel","ngModelChange"],["name","nombreFamiliar","type","text","required","",3,"ngModel","ngModelChange"],["name","fechaNacimientoFamiliar","type","date","required","",3,"ngModel","ngModelChange"],["name","parentescoFamiliar","type","text","required","",3,"ngModel","ngModelChange"],["button","true",3,"click"]],template:function(e,t){1&e&&(i._UZ(0,"app-header",0),i.TgZ(1,"ion-content",1)(2,"ion-grid",2)(3,"ion-row")(4,"ion-col",3)(5,"div")(6,"webcam",4),i.NdJ("imageCapture",function(n){return t.handleImage(n)}),i.qZA(),i.TgZ(7,"ion-button",5),i.NdJ("click",function(){return t.triggerSnapshot()}),i._uU(8," Tomar Foto"),i.qZA()()(),i.TgZ(9,"ion-col",6),i.YNc(10,F,40,11,"form",7),i.YNc(11,N,34,8,"form",7),i.qZA()(),i.TgZ(12,"ion-row")(13,"ion-col")(14,"ion-button",8),i.NdJ("click",function(){return t.limpiarCampos()}),i._uU(15,"\nNuevo Titular\n"),i.qZA()()(),i.YNc(16,P,4,0,"ion-row",9),i.qZA(),i.TgZ(17,"ion-grid",2)(18,"ion-row",10)(19,"ion-col",11),i.YNc(20,v,14,7,"ion-card",12),i.qZA(),i.TgZ(21,"ion-col",11),i.YNc(22,w,12,7,"ion-card",13),i.qZA()()()()),2&e&&(i.xp6(3),i.Tol(t.fondo),i.xp6(3),i.Q6J("height",300)("width",300)("trigger",t.triggerObservable),i.xp6(4),i.Q6J("ngIf",t.noHayTitular),i.xp6(1),i.Q6J("ngIf",t.noHayFamiliar),i.xp6(5),i.Q6J("ngIf",t.encontroAfiliado),i.xp6(4),i.Q6J("ngForOf",t.lista),i.xp6(2),i.Q6J("ngForOf",t.listaFamiliares))},dependencies:[u.sg,u.O5,m._Y,m.JJ,m.JL,m.Q7,m.On,m.F,r.YG,r.PM,r.FN,r.Zi,r.tO,r.Dq,r.wI,r.W2,r.jY,r.Xz,r.pK,r.Ie,r.Q$,r.q_,r.Nd,r.Bs,r.as,r.j9,T.G,d.i3],styles:[".actionBtn[_ngcontent-%COMP%]{margin-top:5px;margin-bottom:2px;font-size:1.2em}.snapshot[_ngcontent-%COMP%]{text-align:center}.snapshot[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:800px;max-height:800px}ul.links[_ngcontent-%COMP%]{padding-bottom:20px}.custom-bg[_ngcontent-%COMP%]{background:rgb(69,136,69)}.custom-bg-familiar[_ngcontent-%COMP%]{background:rgb(248,252,3)}.custom-bg-cards[_ngcontent-%COMP%]{background:rgb(175,103,21)}.custom-bg-cards-familiar[_ngcontent-%COMP%]{background:rgb(10,218,120)}.my-label[_ngcontent-%COMP%]{color:#0f0bf0;font-size:1.2em}"]}),a})()}];let J=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=i.oAB({type:a}),a.\u0275inj=i.cJS({imports:[c.Bz.forChild(q),c.Bz]}),a})();var E=s(6472);let U=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=i.oAB({type:a}),a.\u0275inj=i.cJS({imports:[u.ez,m.u5,r.Pc,J,E.K,d.Tm]}),a})()}}]);